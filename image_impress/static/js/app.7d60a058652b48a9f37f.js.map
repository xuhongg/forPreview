{"version":3,"sources":["webpack:///./src/App.vue?e7a1","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?00a9","webpack:///./src/views/Home.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","Home","data","msg","previewList","finalList","maxW","maxH","methods","uploadF","e","imgArr","target","files","length","forEach","call","readAndPreview","file","vm","console","log","reader","FileReader","readAsDataURL","addEventListener","push","src","result","compress","$refs","preImg","compressF","alert","img","naturalWidth","naturalHeight","targetW","targetH","Math","round","imgN","Image","onload","canvas","document","createElement","width","height","ctx","getContext","clearRect","drawImage","dataURL","toDataURL","$nextTick","finalImg","toBlob","blob","views_Home","_vm","staticClass","ref","type","multiple","on","change","_v","click","_l","item","index","key","refInFor","_e","src_views_Home","Home_normalizeComponent","Vue","use","Router","router","routes","path","component","config","productionTip","el","components","App","template"],"mappings":"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","file":"static/js/app.7d60a058652b48a9f37f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1c130806\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1c130806\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1c130806\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1c130806\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <!-- <img src=\"./assets/logo.png\"> -->\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import \"main.less\";\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n  width: 100%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template>\r\n    <div id=\"app\">\r\n        <div class=\"buttonList flex\">\r\n            <input ref=\"input\" type=\"file\" @change=\"uploadF\" multiple />\r\n            <button @click=\"compress\">压缩</button>\r\n        </div>\r\n        <!-- 压缩前图片 -->\r\n        <div v-if=\"previewList.length > 0\" class=\"preview flex\" ref=\"preview\">\r\n            <img ref=\"preImg\" v-for=\"(item, index) in previewList\" class=\"new\" :key=\"index\" :src=\"item.src\" />\r\n        </div>\r\n        <!-- 压缩后图片 -->\r\n        <div v-if=\"finalList.length > 0\" class=\"preview flex\">\r\n            <img ref=\"finalImg\" v-for=\"(item, index) in finalList\" class=\"new\" :key=\"index\" :src=\"item.src\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'app',\r\n    data() {\r\n        return {\r\n            msg: '图片压缩',\r\n            previewList: [],//渲染预览图片\r\n            finalList: [],//压缩后图片\r\n            maxW: 80,//最大宽\r\n            maxH: 80,//最大高\r\n        }\r\n    },\r\n    methods: {\r\n        /**\r\n         * 上传图片信息\r\n         */\r\n        uploadF(e) {\r\n\r\n            const imgArr = e.target.files\r\n            if (imgArr.length) {\r\n                [].forEach.call(imgArr, this.readAndPreview);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 读取和预览图片\r\n         */\r\n        readAndPreview(file) {\r\n            let vm = this\r\n            console.log('file', file)\r\n            let reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.addEventListener(\"load\", function () {\r\n                vm.previewList.push({ file: file, src: this.result });\r\n            }, false);\r\n            //true 是捕获  默认是false冒泡\r\n        },\r\n\r\n        /**\r\n         * 压缩\r\n         */\r\n        compress() {\r\n            if (this.previewList.length == 0) {\r\n                alert(\"请选择图片\")\r\n                return\r\n            }\r\n            [].forEach.call(this.$refs.preImg, this.compressF);\r\n        },\r\n        /**\r\n         * 压缩逻辑\r\n         */\r\n        compressF(img) {\r\n            let vm = this\r\n            let naturalWidth = img.naturalWidth\r\n            let naturalHeight = img.naturalHeight\r\n            let targetW = null\r\n            let targetH = null\r\n            // 判断图片是否需要压缩\r\n            if (naturalWidth > this.maxW || naturalHeight > this.maxH) {\r\n                let scale = naturalWidth / naturalHeight;\r\n                if (scale > (this.maxW / this.maxH)) {\r\n                    //Math 对象实例 round() 方法可把一个数字舍入为最接近的整数\r\n                    // 更宽 按最大宽度 等比例设置尺寸\r\n                    targetW = this.maxW\r\n                    targetH = Math.round(this.maxH * (naturalHeight / naturalWidth))\r\n                } else {\r\n                    // 更高，按最大高度 等比例设置尺寸\r\n                    targetH = this.maxH\r\n                    targetW = Math.round(this.maxH * (naturalWidth / naturalHeight))\r\n                }\r\n\r\n            } else {\r\n                alert('无需压缩')\r\n                return false\r\n            }\r\n\r\n            let imgN = new Image()\r\n            imgN.src = img['src'] // 图片的地址\r\n            imgN['width'] = targetW\r\n            imgN['height'] = targetH\r\n            imgN.onload = function () {\r\n                let canvas = document.createElement('canvas')\r\n                canvas.width = targetW; /*设置新的图片的宽度*/\r\n                canvas.height = targetH; /*设置新的图片的长度*/\r\n                let ctx = canvas.getContext('2d')\r\n                ctx.clearRect(0, 0, targetW, targetH)\r\n                ctx.drawImage(this, 0, 0, targetW, targetH)\r\n                let dataURL = canvas.toDataURL(\"image/png\", 1);\r\n                vm.finalList.push({ src: dataURL });\r\n                vm.$nextTick(() => {\r\n                    console.log(vm.$refs.finalImg)\r\n                })\r\n\r\n                // blob格式上传\r\n                canvas.toBlob(blob => {\r\n                    console.log(blob)\r\n                    // 后台接口交互\r\n                })\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"../main.less\";\r\n#app {\r\n    font-family: \"Avenir\", Helvetica, Arial, sans-serif;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    text-align: center;\r\n    color: #2c3e50;\r\n    margin-top: 60px;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    .buttonList {\r\n        width: 70%;\r\n        justify-content: space-between;\r\n\r\n        input {\r\n            display: inline-block;\r\n        }\r\n\r\n        button {\r\n            width: 100px;\r\n        }\r\n    }\r\n\r\n    .preview {\r\n        margin: 30px auto;\r\n        width: 70%;\r\n        background: lightgray;\r\n        padding: 30px;\r\n        flex-wrap: wrap;\r\n\r\n        img {\r\n            margin: 10px;\r\n            width: 100px;\r\n        }\r\n    }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/Home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"buttonList flex\"},[_c('input',{ref:\"input\",attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.uploadF}}),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.compress}},[_vm._v(\"压缩\")])]),_vm._v(\" \"),(_vm.previewList.length > 0)?_c('div',{ref:\"preview\",staticClass:\"preview flex\"},_vm._l((_vm.previewList),function(item,index){return _c('img',{key:index,ref:\"preImg\",refInFor:true,staticClass:\"new\",attrs:{\"src\":item.src}})}),0):_vm._e(),_vm._v(\" \"),(_vm.finalList.length > 0)?_c('div',{staticClass:\"preview flex\"},_vm._l((_vm.finalList),function(item,index){return _c('img',{key:index,ref:\"finalImg\",refInFor:true,staticClass:\"new\",attrs:{\"src\":item.src}})}),0):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7dd0f8cb\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Home.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7dd0f8cb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Home.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7dd0f8cb\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7dd0f8cb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Home.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\n// import HelloWorld from '@/components/HelloWorld'\nimport Home from '@/views/Home'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n  {\n    path: '/',\n      name: 'Home',\n      component: Home\n  }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport 'amfe-flexible'; // 引入lib-flexible\nimport router from './router'\nimport './main.less'\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}