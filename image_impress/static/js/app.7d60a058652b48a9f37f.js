webpackJsonp([1],{"6Y5n":function(t,e){},CYWo:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},i,!1,function(t){n("CYWo")},"data-v-1c130806",null).exports,s=(n("QKTF"),n("/ocq")),o={name:"app",data:function(){return{msg:"图片压缩",previewList:[],finalList:[],maxW:80,maxH:80}},methods:{uploadF:function(t){var e=t.target.files;e.length&&[].forEach.call(e,this.readAndPreview)},readAndPreview:function(t){var e=this;console.log("file",t);var n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",function(){e.previewList.push({file:t,src:this.result})},!1)},compress:function(){0!=this.previewList.length?[].forEach.call(this.$refs.preImg,this.compressF):alert("请选择图片")},compressF:function(t){var e=this,n=t.naturalWidth,a=t.naturalHeight,i=null,r=null;if(!(n>this.maxW||a>this.maxH))return alert("无需压缩"),!1;n/a>this.maxW/this.maxH?(i=this.maxW,r=Math.round(this.maxH*(a/n))):(r=this.maxH,i=Math.round(this.maxH*(n/a)));var s=new Image;s.src=t.src,s.width=i,s.height=r,s.onload=function(){var t=document.createElement("canvas");t.width=i,t.height=r;var n=t.getContext("2d");n.clearRect(0,0,i,r),n.drawImage(this,0,0,i,r);var a=t.toDataURL("image/png",1);e.finalList.push({src:a}),e.$nextTick(function(){console.log(e.$refs.finalImg)}),t.toBlob(function(t){console.log(t)})}}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"buttonList flex"},[n("input",{ref:"input",attrs:{type:"file",multiple:""},on:{change:t.uploadF}}),t._v(" "),n("button",{on:{click:t.compress}},[t._v("压缩")])]),t._v(" "),t.previewList.length>0?n("div",{ref:"preview",staticClass:"preview flex"},t._l(t.previewList,function(t,e){return n("img",{key:e,ref:"preImg",refInFor:!0,staticClass:"new",attrs:{src:t.src}})}),0):t._e(),t._v(" "),t.finalList.length>0?n("div",{staticClass:"preview flex"},t._l(t.finalList,function(t,e){return n("img",{key:e,ref:"finalImg",refInFor:!0,staticClass:"new",attrs:{src:t.src}})}),0):t._e()])},staticRenderFns:[]};var l=n("VU/8")(o,c,!1,function(t){n("6Y5n")},"data-v-7dd0f8cb",null).exports;a.a.use(s.a);var u=new s.a({routes:[{path:"/",name:"Home",component:l}]});n("ydoK");a.a.config.productionTip=!1,new a.a({el:"#app",router:u,components:{App:r},template:"<App/>"})},ydoK:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7d60a058652b48a9f37f.js.map